{"ast":null,"code":"import _classCallCheck from \"/home/melanie/Code/component-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/melanie/Code/component-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/melanie/Code/component-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/melanie/Code/component-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/melanie/Code/component-library/src/components/ErrorBoundary/ErrorBoundary.tsx\";\nimport React from 'react';\nimport { Alert } from '..';\nexport var ErrorBoundary = /*#__PURE__*/function (_React$Component) {\n  _inherits(ErrorBoundary, _React$Component);\n\n  var _super = _createSuper(ErrorBoundary);\n\n  function ErrorBoundary() {\n    var _this;\n\n    _classCallCheck(this, ErrorBoundary);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      hasError: false\n    };\n    return _this;\n  }\n\n  _createClass(ErrorBoundary, [{\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error, errorInfo) {\n      console.error(error, errorInfo);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var hasError = this.state.hasError;\n      var alertProps = this.props.alertProps || {\n        text: 'Something went wrong',\n        type: 'error',\n        heading: 'Error'\n      };\n\n      if (hasError) {\n        // TODO: set alert context here instead? return nothing?\n        return /*#__PURE__*/React.createElement(Alert, Object.assign({}, alertProps, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 11\n          }\n        }));\n      }\n\n      return this.props.children;\n    }\n  }], [{\n    key: \"getDerivedStateFromError\",\n    value: function getDerivedStateFromError(error) {\n      // Update state so the next render will show the fallback UI.\n      return {\n        hasError: true\n      };\n    }\n  }]);\n\n  return ErrorBoundary;\n}(React.Component);","map":{"version":3,"sources":["/home/melanie/Code/component-library/src/components/ErrorBoundary/ErrorBoundary.tsx"],"names":["ErrorBoundary","React","hasError","console","alertProps","text","type","heading"],"mappings":";;;;;AAAA,OAAA,KAAA,MAAA,OAAA;AACA,SAAA,KAAA,QAAA,IAAA;AAUA,OAAA,IAAaA,aAAb,GAAA,aAAA,UAAA,gBAAA,EAAA;AAAA,EAAA,SAAA,CAAA,aAAA,EAAA,gBAAA,CAAA;;AAAA,MAAA,MAAA,GAAA,YAAA,CAAA,aAAA,CAAA;;AAAA,WAAA,aAAA,GAAA;AAAA,QAAA,KAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,aAAA,CAAA;;AAAA,SAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAAA,IAAA,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;AAAA,MAAA,IAAA,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA;AAAA;;AAAA,IAAA,KAAA,GAAA,MAAA,CAAA,IAAA,CAAA,KAAA,CAAA,MAAA,EAAA,CAAA,IAAA,EAAA,MAAA,CAAA,IAAA,CAAA,CAAA;AAAA,IAAA,KAAA,CAAA,KAAA,GAI6C;AAC3CE,MAAAA,QAAQ,EAAE;AADiC,KAJ7C;AAAA,WAAA,KAAA;AAAA;;AAAA,EAAA,YAAA,CAAA,aAAA,EAAA,CAAA;AAAA,IAAA,GAAA,EAAA,mBAAA;AAAA,IAAA,KAAA,EAAA,SAAA,iBAAA,CAAA,KAAA,EAAA,SAAA,EAa+C;AAC7CC,MAAAA,OAAO,CAAPA,KAAAA,CAAAA,KAAAA,EAAAA,SAAAA;AACA;AAfF,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,QAAA;AAAA,IAAA,KAAA,EAAA,SAAA,MAAA,GAiBU;AAAA,UACAD,QADA,GACa,KADb,KACa,CADb,QAAA;AAER,UAAME,UAAU,GAAG,KAAA,KAAA,CAAA,UAAA,IAAyB;AAC3CC,QAAAA,IAAI,EADuC,sBAAA;AAE3CC,QAAAA,IAAI,EAFuC,OAAA;AAG3CC,QAAAA,OAAO,EAAE;AAHkC,OAA5C;;AAKA,UAAA,QAAA,EAAc;AACb;AACA,eAAA,aAAO,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,UAAA,EAAA;AAAA,UAAA,MAAA,EAAA,IAAA;AAAA,UAAA,QAAA,EAAA;AAAA,YAAA,QAAA,EAAA,YAAA;AAAA,YAAA,UAAA,EAAA,EAAA;AAAA,YAAA,YAAA,EAAA;AAAA;AAAA,SAAA,CAAA,CAAP;AACA;;AAED,aAAO,KAAA,KAAA,CAAP,QAAA;AACA;AA9BF,GAAA,CAAA,EAAA,CAAA;AAAA,IAAA,GAAA,EAAA,0BAAA;AAAA,IAAA,KAAA,EAAA,SAAA,wBAAA,CAAA,KAAA,EAQ6C;AAC3C;AACA,aAAO;AAAEL,QAAAA,QAAQ,EAAE;AAAZ,OAAP;AACA;AAXF,GAAA,CAAA,CAAA;;AAAA,SAAA,aAAA;AAAA,CAAA,CAAmCD,KAAK,CAAxC,SAAA,CAAA","sourcesContent":["import React from 'react';\nimport { Alert, AlertProps } from '..';\n\ntype ErrorBoundaryState = {\n\thasError: boolean;\n};\n\ntype ErrorBoundaryProps = {\n\talertProps?: AlertProps;\n};\n\nexport class ErrorBoundary extends React.Component<ErrorBoundaryProps> {\n\t// https://reactjs.org/docs/error-boundaries.html\n\t// Hooks don't handle componentDidCatch so this has to be a class for now\n\t// https://reactjs.org/docs/hooks-faq.html#do-hooks-cover-all-use-cases-for-classes\n\tpublic readonly state: ErrorBoundaryState = {\n\t\thasError: false,\n\t};\n\n\tstatic getDerivedStateFromError(error: any) {\n\t\t// Update state so the next render will show the fallback UI.\n\t\treturn { hasError: true };\n\t}\n\n\tcomponentDidCatch(error: any, errorInfo: any) {\n\t\tconsole.error(error, errorInfo);\n\t}\n\n\trender() {\n\t\tconst { hasError } = this.state;\n\t\tconst alertProps = this.props.alertProps || {\n\t\t\ttext: 'Something went wrong',\n\t\t\ttype: 'error',\n\t\t\theading: 'Error',\n\t\t};\n\t\tif (hasError) {\n\t\t\t// TODO: set alert context here instead? return nothing?\n\t\t\treturn <Alert {...alertProps} />;\n\t\t}\n\n\t\treturn this.props.children;\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}