{"ast":null,"code":"import _classCallCheck from\"/home/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/home/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/home/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import ColumnHeader from'./ColumnHeader';import Row from'./Row';import cx from'classnames';export var Table=/*#__PURE__*/function(_React$Component){_inherits(Table,_React$Component);var _super=_createSuper(Table);function Table(props){var _this;_classCallCheck(this,Table);_this=_super.call(this,props);_this.setTableSort=function(sort){_this.setState(sort);};var defaultSortColumn=props.defaultSortColumn,defaultSortOrder=props.defaultSortOrder;_this.state={sortColumn:defaultSortColumn,sortOrder:defaultSortOrder};return _this;}_createClass(Table,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,id=_this$props.id,data=_this$props.data,rowKey=_this$props.rowKey,columns=_this$props.columns,onRowClick=_this$props.onRowClick,fullWidth=_this$props.fullWidth,caption=_this$props.caption;var _this$state=this.state,sortColumn=_this$state.sortColumn,sortOrder=_this$state.sortOrder;var cells=columns.map(function(column){return column.cell;});var sortedData=data;if(typeof sortColumn!=='undefined'&&sortOrder){var sortBy=columns[sortColumn].sort;if(sortBy){sortedData=data.sort(function(a,b){var aBy=sortBy(a);var bBy=sortBy(b);// prettier-ignore\nif(aBy===bBy){return 0;}else if(aBy<bBy===(sortOrder==='ascending')){return-1;}else{return 1;}});}}return/*#__PURE__*/React.createElement(\"table\",{id:id,className:cx('oec-table',{'oec-table--full-width':fullWidth})},caption&&/*#__PURE__*/React.createElement(\"caption\",null,caption),/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,columns.map(function(column,index){return/*#__PURE__*/React.createElement(ColumnHeader,{name:column.name,sortable:!!column.sort,sorted:sortColumn===index,sortOrder:sortOrder,index:index,key:index,setTableSort:_this2.setTableSort,width:column.width,className:column.className});}))),/*#__PURE__*/React.createElement(\"tbody\",null,sortedData.map(function(row){return/*#__PURE__*/React.createElement(Row,{row:row,cells:cells,onClick:onRowClick,key:rowKey(row)});})));}}]);return Table;}(React.Component);export default Table;","map":{"version":3,"sources":["/home/app/src/components/Table/Table.tsx"],"names":["Table","React","defaultSortColumn","defaultSortOrder","props","sortColumn","sortOrder","id","data","rowKey","columns","onRowClick","fullWidth","caption","cells","column","sortedData","sortBy","aBy","bBy","cx","className"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ColumnHeader from './ColumnHeader';\nimport Row from './Row';\nimport cx from 'classnames';\n\nexport type Column<T> = {\n\tname: string | JSX.Element;\n\tcell: React.FC<{ row: T }>;\n\tsort?: (row: T) => number | string;\n\twidth?: string;\n\tclassName?: string;\n};\n\nexport type SortOrder = 'ascending' | 'descending';\n\nexport type TableProps<T> = {\n\tid: string;\n\tdata: T[];\n\trowKey: (row: T) => number | string;\n\tcolumns: Column<T>[];\n\tdefaultSortColumn?: number;\n\tdefaultSortOrder?: SortOrder;\n\tonRowClick?: (row: T) => () => any;\n\tfullWidth?: boolean;\n\tcaption?: string;\n};\n\nexport type TableSort = {\n\tsortColumn?: number;\n\tsortOrder?: SortOrder;\n};\n\nexport class Table<T> extends React.Component<TableProps<T>, TableSort> {\n\tconstructor(props: TableProps<T>) {\n\t\tsuper(props);\n\n\t\tconst { defaultSortColumn, defaultSortOrder } = props;\n\t\tthis.state = { sortColumn: defaultSortColumn, sortOrder: defaultSortOrder };\n\t}\n\n\tsetTableSort = (sort: TableSort) => {\n\t\tthis.setState(sort);\n\t};\n\n\trender() {\n\t\tconst { id, data, rowKey, columns, onRowClick, fullWidth, caption } = this.props;\n\t\tconst { sortColumn, sortOrder } = this.state;\n\n\t\tconst cells = columns.map((column) => column.cell);\n\n\t\tlet sortedData = data;\n\n\t\tif (typeof sortColumn !== 'undefined' && sortOrder) {\n\t\t\tconst sortBy = columns[sortColumn].sort;\n\n\t\t\tif (sortBy) {\n\t\t\t\tsortedData = data.sort((a, b) => {\n\t\t\t\t\tconst aBy = sortBy(a);\n\t\t\t\t\tconst bBy = sortBy(b);\n\n\t\t\t\t\t// prettier-ignore\n\t\t\t\t\tif (aBy === bBy) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t} else if ((aBy < bBy) === (sortOrder === 'ascending')) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<table id={id} className={cx('oec-table', { 'oec-table--full-width': fullWidth })}>\n\t\t\t\t{caption && <caption>{caption}</caption>}\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{columns.map((column, index) => (\n\t\t\t\t\t\t\t<ColumnHeader\n\t\t\t\t\t\t\t\tname={column.name}\n\t\t\t\t\t\t\t\tsortable={!!column.sort}\n\t\t\t\t\t\t\t\tsorted={sortColumn === index}\n\t\t\t\t\t\t\t\tsortOrder={sortOrder}\n\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tsetTableSort={this.setTableSort}\n\t\t\t\t\t\t\t\twidth={column.width}\n\t\t\t\t\t\t\t\tclassName={column.className}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{sortedData.map((row) => (\n\t\t\t\t\t\t<Row row={row} cells={cells} onClick={onRowClick} key={rowKey(row)} />\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t);\n\t}\n}\n\nexport default Table;\n"]},"metadata":{},"sourceType":"module"}